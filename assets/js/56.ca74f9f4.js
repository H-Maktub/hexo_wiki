(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{395:function(e,a,t){"use strict";t.r(a);var s=t(4),r=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[a("a",{attrs:{href:"https://github.com/rclone/rclone",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rclone"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#说明"}},[e._v("#")]),e._v(" 说明")]),e._v(" "),a("blockquote",[a("p",[e._v("加密备份数据 "),a("br"),e._v("\n实现三备份，本地一份数据，VPS一份数据，云盘一份数据")])]),e._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[e._v("#")]),e._v(" 安装")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" https://rclone.org/install.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sudo")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n")])])]),a("h3",{attrs:{id:"配置rclone"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置rclone"}},[e._v("#")]),e._v(" 配置"),a("code",[e._v("rclone")])]),e._v(" "),a("p",[e._v("生成"),a("code",[e._v("ssh key")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("mkdir")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-p")]),e._v(" ~/.config/rclone/key\nssh-keygen "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" ed25519 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-C")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"home"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-f")]),e._v(" ~/.config/rclone/key/openapi\n")])])]),a("p",[e._v("配置命令")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("rclone config\n")])])]),a("blockquote",[a("p",[e._v("生成两个配置，一个"),a("code",[e._v("oneapi sftp")]),e._v("远程配置，一个"),a("code",[e._v("oneapi_encode")]),e._v("加密配置")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[oneapi]\ntype = sftp\nuser = root\nhost = ***远程服务器ip***\nkey_file = ~/.config/rclone/key/openapi\n\n[oneapi_encode]\ntype = crypt\nremote = oneapi:.backupRepo\nfilename_encryption = off\ndirectory_name_encryption = false\npassword = ***密码可自动生成***\npassword2 = ***密码可自动生成***\n")])])]),a("h3",{attrs:{id:"运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[e._v("#")]),e._v(" 运行")]),e._v(" "),a("blockquote",[a("p",[e._v("备份文件夹"),a("code",[e._v("~/.docker")]),e._v(",通过"),a("code",[e._v("oneapi_encode")]),e._v("加密同步文件")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("rclone "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v(" ~/.docker oneapi_encode:/\n")])])]),a("p",[e._v("配置定时运行")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("crontab")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-e")]),e._v("\n")])])]),a("blockquote",[a("p",[e._v("每周日22点运行")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("0 22 * * 0 rclone sync ~/.docker oneapi_encode:/\n")])])]),a("h3",{attrs:{id:"设置云备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置云备份"}},[e._v("#")]),e._v(" 设置云备份")]),e._v(" "),a("blockquote",[a("p",[e._v("onedrive相关文章"),a("br"),e._v(" "),a("a",{attrs:{href:"https://pickstar.today/2023/01/vps%E4%BD%BF%E7%94%A8rclone%E6%8C%82%E8%BD%BDonedrive%E8%AF%A6%E7%BB%86%E8%AE%B0%E5%BD%95/",target:"_blank",rel:"noopener noreferrer"}},[e._v("vps使用rclone挂载onedrive详细记录"),a("OutboundLink")],1),e._v(" "),a("br"),e._v(" "),a("a",{attrs:{href:"https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade",target:"_blank",rel:"noopener noreferrer"}},[e._v("onedrive client_id&client_secret配置地址"),a("OutboundLink")],1),e._v(" "),a("br"),e._v("\nGoogle Drive相关文章 "),a("br"),e._v(" "),a("a",{attrs:{href:"https://www.chatgpt.org.uk/2023/06/vpsrclonegoogle-drive.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("vps使用rclone挂载Google Drive详细记录"),a("OutboundLink")],1),e._v(" \\")])]),e._v(" "),a("p",[e._v("手动配置后,配置如下")]),e._v(" "),a("blockquote",[a("p",[a("code",[e._v("https://onedrive.live.com/?id=***root_folder_id***=***root_folder_id***")]),e._v("获取"),a("code",[e._v("root_folder_id")]),e._v(" "),a("br"),e._v(" "),a("code",[e._v("https://drive.google.com/drive/folders/***root_folder_id***")]),e._v("获取"),a("code",[e._v("root_folder_id")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("[onedrive]\ntype = onedrive\nclient_id = ***Azure平台配置***\nclient_secret = ***Azure平台配置***\ntoken = ***自动生成***\ndrive_id =  ***自动生成***\ndrive_type = personal\nroot_folder_id = ***onedrive URL获取***\n")])])]),a("p",[e._v("同步")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("rclone "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v(" ~/.backupRepo onedrive:/\n")])])]),a("blockquote",[a("p",[e._v("每月1号和15号0点运行")])]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1,15")]),e._v(" * * rclone "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v(" ~/.backupRepo onedrive:/\n")])])]),a("h3",{attrs:{id:"参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[e._v("#")]),e._v(" 参数说明")]),e._v(" "),a("h4",{attrs:{id:"filter-from-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#filter-from-path"}},[e._v("#")]),e._v(" "),a("code",[e._v("--filter-from ***path***")])]),e._v(" "),a("blockquote",[a("p",[e._v("过滤文件")])]),e._v(" "),a("p",[e._v("示例")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),e._v(" * * "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v(" rclone "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("sync")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-vv")]),e._v(" /mnt/disk/docker/ home_encode:/ --filter-from /mnt/disk/docker/sync.list \n")])])]),a("p",[a("code",[e._v("/mnt/disk/docker/sync.list")]),e._v("内容如下")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("+ docker-compose.yml\n+ /qbittorrent/**\n+ /music_tag_web/**\n- /moviepilot/moviepilot/\n+ /moviepilot/**\n+ /filebrowser/**\n- /alist/log/\n- /alist/temp/\n- /alist/download/\n+ /alist/**\n+ /flare/**\n- *\n")])])]),a("p",[e._v("说明")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("- *")]),e._v("移除所有文件")]),e._v(" "),a("li",[a("code",[e._v("/alist/**")]),e._v("添加"),a("code",[e._v("alist")]),e._v("文件夹所有文件")]),e._v(" "),a("li",[a("code",[e._v("- /alist/temp/")]),e._v("和"),a("code",[e._v("/alist/download/")]),e._v("移除"),a("code",[e._v("alist")]),e._v("的"),a("code",[e._v("temp")]),e._v("和"),a("code",[e._v("download")]),e._v("两个子文件夹")]),e._v(" "),a("li",[a("code",[e._v("+ docker-compose.yml")]),e._v("添加所有名称为"),a("code",[e._v("docker-compose.yml")]),e._v("的文件")])])])}),[],!1,null,null,null);a.default=r.exports}}]);