(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{365:function(a,t,e){"use strict";e.r(t);var s=e(4),r=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"多端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多端口"}},[a._v("#")]),a._v(" 多端口")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("# :80 :81 多端口\nexample.com:80 :81 {\n    root * /usr/share/caddy/\n    file_server\n}\n")])])]),t("h2",{attrs:{id:"取消缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#取消缓存"}},[a._v("#")]),a._v(" 取消缓存")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('example.com {\n\n    #修改header取消缓存\n    handle {\n\t        header Cache-Control "no-cache, no-store, must-revalidate"\n\t}\n\n    root * /usr/share/caddy/\n    file_server\n}\n')])])]),t("h2",{attrs:{id:"添加token验证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加token验证"}},[a._v("#")]),a._v(" 添加token验证")]),a._v(" "),t("ol",[t("li",[a._v("修改配置")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("example.com {\n    #添加pw参数判断\n    @jiami {\n            query pw=abcdefg\n    }\n\n    root @jiami /usr/share/caddy/\n    file_server\n}\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("访问")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("http://example.com?pw=abcdefg\n")])])]),t("h2",{attrs:{id:"添加basicauth验证-网页访问输入账号密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加basicauth验证-网页访问输入账号密码"}},[a._v("#")]),a._v(" 添加"),t("code",[a._v("basicauth")]),a._v("验证（网页访问输入账号密码）")]),a._v(" "),t("ol",[t("li",[a._v("生成密钥")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("caddy hash-password --plaintext abc123\n\n#输出\n$2a$14$J8U4Tf1gxx1ErgadUM6trOm3vQvBLZ236J8KTwJ1Hwnc09cRx90B2\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[a._v("修改配置（用户：test, 密码：abc123）")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("example.com {\n    basicauth * {\n        test $2a$14$J8U4Tf1gxx1ErgadUM6trOm3vQvBLZ236J8KTwJ1Hwnc09cRx90B2\n    }\n    root * /usr/share/caddy/\n    file_server\n}\n")])])]),t("h2",{attrs:{id:"禁止get请求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#禁止get请求"}},[a._v("#")]),a._v(" 禁止"),t("code",[a._v("GET")]),a._v("请求")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("example.com {\n  @oneapi {\n    not method GET\n  }\n  reverse_proxy @oneapi localhost:3000\n  @root {\n    method GET\n  }\n  abort @root \n}\n")])])]),t("h3",{attrs:{id:"cel表达式匹配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cel表达式匹配"}},[a._v("#")]),a._v(" CEL表达式匹配")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("example.com {\n  @oneapi {\n    not method GET\n  }\n  reverse_proxy @oneapi localhost:3000\n  # 匹配\"GET\"请求,\"/login\"和\"/api/*\"路径\n  @root {\n    expression `method('GET') || path('/login') || path('/api/*')`\n  }\n  abort @root \n}\n")])])]),t("h3",{attrs:{id:"移除path前缀"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#移除path前缀"}},[a._v("#")]),a._v(" 移除path前缀")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("example.com {\n  handle /sub/* {\n    uri strip_prefix /sub\n  }\n}\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);