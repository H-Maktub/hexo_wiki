(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{355:function(s,a,n){"use strict";n.r(a);var e=n(4),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"系统环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统环境"}},[s._v("#")]),s._v(" 系统环境")]),s._v(" "),a("ul",[a("li",[s._v("debian 12")])]),s._v(" "),a("h3",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" samba\n")])])]),a("h3",{attrs:{id:"常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[s._v("#")]),s._v(" 常用命令")]),s._v(" "),a("ul",[a("li",[s._v("查看用户")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("pdbedit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v("\n")])])]),a("ul",[a("li",[s._v("为root用户设置smb密码")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("smbpasswd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" root\n")])])]),a("h3",{attrs:{id:"常用配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用配置"}},[s._v("#")]),s._v(" 常用配置")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("/etc/samba/smb.conf")]),s._v(",增强安全性设置")])]),s._v(" "),a("div",{staticClass:"language-conf extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# global不要修改\n[global]\n    workgroup = WORKGROUP\n    interfaces = <IP>\n    bind interfaces only = yes\n    log file = /var/log/samba/log.%m\n    max log size = 1000\n    logging = file\n    panic action = /usr/share/samba/panic-action %d\n\n    server role = standalone server\n    obey pam restrictions = yes\n    unix password sync = yes\n\n    passwd program = /usr/bin/passwd %u\n    passwd chat = *Enter\\snew\\s*\\spassword:* %n\\n *Retype\\snew\\s*\\spassword:* %n\\n *password\\supdated\\ssuccessfully* .\n    pam password change = yes\n\n    #==========安全===========\n    map to guest = Never\n    usershare allow guests = no\n    # 禁用共享列表浏览\n    browseable = no\n    # 防止匿名枚举共享（增强安全）\n    restrict anonymous = 2\n    # 可选：限制仅允许认证用户访问元数据\n    access based share enum = yes\n    # 禁用 NetBIOS 服务\n    disable netbios = yes\n    # 强制仅使用 SMB over TCP（端口 445）\n    smb ports = 445\n\n    #==========优化===========\n    # 禁用过时的 SMB1，强制使用 SMB3\n    min protocol = SMB3\n    server min protocol = SMB3\n    client min protocol = SMB3\n    socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=524288 SO_SNDBUF=524288\n    read raw = yes\n    write raw = yes\n    getwd cache = yes\n    # 关闭打印服务（若不需要）\n    load printers = no\n    printing = bsd\n    printcap name = /dev/null\n    disable spoolss = yes\n\n    # 减少日志级别\n    log level = 1\n\n[back]\n    path = <SHARE PATH>\n    # 设置只读\n    writeable=no\n    writeable = no\n    read only = yes\n    create mask=0777\n    directory mask=0777\n    create mask = 0777\n    directory mask = 0777\n    valid users = root\n    guest ok = no\n")])])]),a("h3",{attrs:{id:"增强安全性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增强安全性"}},[s._v("#")]),s._v(" 增强安全性")]),s._v(" "),a("ul",[a("li",[s._v("关闭"),a("code",[s._v("nmbd")]),s._v("服务")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("systemctl disable nmbd\nsystemctl stop nmbd\n")])])])])}),[],!1,null,null,null);a.default=t.exports}}]);